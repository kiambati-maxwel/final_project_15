<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <record id="chicken_batch_form_view" model="ir.ui.view">
            <field name="name">Chicken Batchs</field>
            <field name="model">chicken.batch</field>
            <field name="arch" type="xml">
                <form string="Chicken Batchs">
                    <sheet>

                        <div class="oe_title">
                            <h1 class="d-flex">
                                <field name="name" string=""/>
                            </h1>
                        </div> <br/>

                        <group>

                            <group>
                                <field name="date_in" string="Select Entry In" placeholder="Entry date"/>
                                <field name="hatch_date" string="Select Hatch Date" placeholder="Hatch date"/>
                                <field name="initial_stock" string="Enter Initial Stock" placeholder="Bird count"/>
                                <field name="house_number" string="Enter House No" placeholder="House no."/>
                                <field name="laying_start_date" string="Select Start Date" placeholder="Select Laying start date"/>
                                <!-- <field name="transfer_ref_id" string="Transfer Ref" placeholder="Enter transfer ID"/> -->
                                <!-- <field name="feed_today" string="Feed Today (Kgs)" placeholder="Enter feed today (kg)"/> -->
                                <!-- <field name="eggs_today" string="Laid Today" placeholder="Enter eggs today"/> -->
                            </group>

                            <group style=" background-color: #efefff; padding: 10px; border-radius: 2px;">
                                <group>
                                    <field name="age" string="Age" placeholder="Auto-calculated"/>
                                    <field name="stock" string="Stock" placeholder="Current bird count"/>
                                    <field name="curled" string="Curled" placeholder="Auto-calculated"/>
                                    <field name="average_eggs_daily" string="Avg Eggs Daily" placeholder="Avg eggs per day"/>
                                </group>
                                <group>
                                    <field name="total_eggs" string="Total Eggs" placeholder="Total eggs collected"/>
                                    <field name="average_feed_daily" string="Avg Feed Daily (Kgs)" placeholder="Avg feed per day (kg)"/>
                                    <field name="total_feed" string="Total Feed (Kgs)" placeholder="Total feed (kg)"/>
                                </group>


                            </group>
                        </group>

                        <notebook>
                            <page string="Eggs Entries">
                                <field name="eggs_ids" string="Eggs Entries"/>
                            </page>
                            <page string="Culling">
                                <field name="cull_ids" string="Culls"/>
                            </page>
                            <page string="Feeding">
                                <field name="feed_ids" string="Feeding Entries"/>
                            </page>
                            <page string="Vaccination">
                                <field name="vaccination_ids" string="Vaccination Entries"/>
                            </page>

                            <page string="More info">
                                <!--                todo: make this field accomodate pictures and more  -->
                                <field name="description" string="More Details"/>
                            </page>

                        </notebook>

                    </sheet>
                </form>
            </field>
        </record>



        <!--   ###### ######  tree view  ############################   -->
        <record id="chicken_batch_tree_view" model="ir.ui.view">
            <field name="name">Chicken Batchs</field>
            <field name="model">chicken.batch</field>
            <field name="arch" type="xml">
                <tree string="Chicken Batchs">
                    <field name="name" string="Batch Number"/>
                    <field name="date_in" string="Entry Date"/>
                    <field name="stock" string="Current Stock"/>
                    <field name="age" string="Age"/>
                    <field name="average_eggs_daily" string="Avg Eggs Daily"/>
                    <field name="total_eggs" string="Total Eggs"/>
                    <!--            todo implement -->
                    <!--          <field name="eggs_today" string="Laid Today" />-->
                </tree>
            </field>
        </record>


        <!--  Search View  -->
        <record id="chicken_batch_search_view" model="ir.ui.view">
            <field name="name">chicken.batch.search</field>
            <field name="model">chicken.batch</field>
            <field name="arch" type="xml">
                <search>
                    <!-- Predefined Filters -->
                    <filter name="older_batches" string="Older Batches &gt; 150 Days" domain="[('age', '&gt;', 150)]"/>
                    <filter name="low_stock" string="Low Stock &lt; 50 Birds" domain="[('stock', '&lt;', 50)]"/>
                    <filter name="high_cull_rate" string="High Cull Rate &gt; 100 Curled Birds" domain="[('curled', '&gt;', 100)]"/>
                    <filter name="high_egg_production" string="High Egg Production Avg 50" domain="[('average_eggs_daily', '&gt;', 50)]"/>
                    <filter name="not_laying" string="Not Laying Yet &gt; Laying Start Date Not activated" domain="[('laying_start_date', '=', False)]"/>
                    <!--                    <filter name="not_vaccinated" string="Not Vaccinated" domain="[('vaccination_ids', '=', False)]"/>-->

                    <!-- Searchable Fields -->
                    <field name="name"/>
                    <field name="hatch_date"/>
                    <field name="house_number"/>
                    <field name="stock"/>
                    <field name="age"/>
                    <field name="total_eggs"/>
                </search>
            </field>
        </record>

        <!--        Graph view -->
        <!-- Opportunities by user and team Graph View -->
        <record id="chicken_batch_graph_view"  model="ir.ui.view">
            <field name="name">chicken.batch.graph.stock</field>
            <field name="model">chicken.batch</field>
            <field name="arch" type="xml">
                <graph string="Batch Analysis" sample="1">
                    <field name="name"/>
                    <field name="stock" type="measure"/>
                </graph>
            </field>
        </record>

        <!-- Egg Production Graph -->
        <record id="view_chicken_batch_graph" model="ir.ui.view">
            <field name="name">chicken.batch.graph_age</field>
            <field name="model">chicken.batch</field>
            <field name="arch" type="xml">
                <graph string="Egg Production" type="bar">
                    <field name="age" type="row"/>
                    <field name="total_eggs" type="measure"/>
                </graph>
            </field>
        </record>

         <!-- Batch Stock Graph -->
        <record id="view_chicken_batch_stock_graph" model="ir.ui.view">
            <field name="name">chicken.batch.graph_age</field>
            <field name="model">chicken.batch</field>
            <field name="arch" type="xml">
                <graph string="Egg Production" type="bar">
                    <field name="name" type="row"/>
                    <field name="stock" type="measure"/>
                </graph>
            </field>
        </record>

        <!-- Culling Graph -->
        <record id="view_chicken_cull_graph" model="ir.ui.view">
            <field name="name">chicken.cull.graph</field>
            <field name="model">chicken.batch</field>
            <field name="arch" type="xml">
                <graph string="Cull Rate" type="pie">
                    <field name="name" type="row"/>
                    <field name="curled" type="measure"/>
                </graph>
            </field>
        </record>

        <!-- Feed Consumption Pivot Table -->
        <record id="view_chicken_feed_pivot" model="ir.ui.view">
            <field name="name">chicken.feed.pivot</field>
            <field name="model">chicken.batch</field>
            <field name="arch" type="xml">
                <pivot string="Feed Consumption">
                    <field name="name" type="col"/>
                    <field name="total_feed" type="measure"/>
                </pivot>
            </field>
        </record>

         <!-- Stock Count Pivot  -->
        <record id="view_chicken_stock_count_pivot" model="ir.ui.view">
            <field name="name">chicken.feed.pivot</field>
            <field name="model">chicken.batch</field>
            <field name="arch" type="xml">
                <pivot string="Feed Consumption">
                    <field name="name" type="col"/>
                    <field name="stock" type="measure"/>
                </pivot>
            </field>
        </record>

        <!-- actions opening views on models -->
        <record model="ir.actions.act_window" id="chicken_batch_action">
            <field name="name">Batchs</field>
            <field name="res_model">chicken.batch</field>
            <field name="view_mode">tree,form,graph</field>
        </record>
        <!-- Action for Egg Production Report -->
        <record id="action_chicken_batch_graph" model="ir.actions.act_window">
            <field name="name">Egg Production Report</field>
            <field name="res_model">chicken.batch</field>
            <field name="view_mode">graph</field>
            <field name="view_id" ref="view_chicken_batch_graph"/>  <!-- Explicitly set the view -->
        </record>

        <!-- Action for Culling Report -->
        <record id="action_chicken_cull_graph" model="ir.actions.act_window">
            <field name="name">Culling Report</field>
            <field name="res_model">chicken.batch</field>
            <field name="view_mode">graph</field>
            <field name="view_id" ref="view_chicken_cull_graph"/>  <!-- Explicitly set the view -->
        </record>

        <!-- Action for Feed Consumption Report -->
        <record id="action_chicken_feed_pivot" model="ir.actions.act_window">
            <field name="name">Feed Consumption Report</field>
            <field name="res_model">chicken.batch</field>
            <field name="view_mode">pivot</field>
        </record>

          <!-- Action for stock analysis -->
        <record id="action_chicken_stock_batch_graph" model="ir.actions.act_window">
            <field name="name">Stock Batch Report</field>
            <field name="res_model">chicken.batch</field>
            <field name="view_mode">graph</field>
            <field name="view_id" ref="view_chicken_batch_stock_graph"/>  <!-- Explicitly set the view -->
        </record>

            <!-- Action for count -->
        <record id="action_chicken_stock_count_pivot" model="ir.actions.act_window">
            <field name="name">Stock Count Report</field>
            <field name="res_model">chicken.batch</field>
            <field name="view_mode">pivot</field>
            <field name="view_id" ref="view_chicken_stock_count_pivot"/>  <!-- Explicitly set the view -->
        </record>



    </data>
</odoo>